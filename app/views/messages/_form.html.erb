<turbo-frame id="message_<%= message.id %>">
  <%= form_with(
        model: [workspace, channel, message],
        url: workspace_channel_message_path(workspace, channel, message),
        method: :patch,
        class: "flex items-start space-x-3"
      ) do |f| %>

    <!-- Avatar -->
    <div class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white">
      <%= message.user.email.first.upcase %>
    </div>

    <div class="flex-1">
      <div class="flex items-center space-x-2 mb-1">
        <span class="text-sm font-semibold"><%= message.user.email %></span>
        <span class="text-xs text-gray-400"><%= message.created_at.strftime("%H:%M") %></span>
      </div>

      <%= f.text_field :body,
                       class: "w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:border-blue-500",
                       autofocus: true %>

      <div class="mt-2 flex space-x-2">
        <%= f.submit "Save",
                     class: "px-3 py-1 text-xs font-medium rounded bg-blue-500 text-white hover:bg-blue-600" %>

        <%= link_to "Cancel",
                    workspace_channel_path(workspace, channel),
                    data: { turbo: false },
                    class: "px-3 py-1 text-xs font-medium rounded bg-gray-100 text-gray-700 hover:bg-gray-200" %>
      </div>
    </div>
  <% end %>
</turbo-frame>